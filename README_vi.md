# Dorothy Discord Bot ğŸ›¡ï¸

Bot báº£o máº­t vÃ  kiá»ƒm duyá»‡t chuyÃªn nghiá»‡p cho Discord vá»›i tÃ­nh nÄƒng AI vÃ  há»‡ thá»‘ng báº£o vá»‡ toÃ n diá»‡n.

## ğŸŒŸ TÃ­nh nÄƒng

### ğŸ¤– Trá»£ lÃ½ AI Dorothy
- Chat vá»›i Dorothy sá»­ dá»¥ng phÃ¢n tÃ­ch cáº£m xÃºc AI
- Pháº£n há»“i tá»± nhiÃªn "doro doro" vá»›i nhiá»u cáº£m xÃºc
- Pháº£n á»©ng thÃ´ng minh dá»±a trÃªn ngá»¯ cáº£nh tin nháº¯n
- ÄÆ°á»£c há»— trá»£ bá»Ÿi NVIDIA API vá»›i fallback thÃ´ng minh

### ğŸ›¡ï¸ Há»‡ thá»‘ng Báº£o máº­t NÃ¢ng cao

#### Chá»‘ng PhÃ¡ Server (Anti-Nuke)
- PhÃ¡t hiá»‡n vÃ  ngÄƒn cháº·n cÃ¡c ná»— lá»±c phÃ¡ hoáº¡i server
- GiÃ¡m sÃ¡t ban, kick, xÃ³a kÃªnh vÃ  xÃ³a role hÃ ng loáº¡t
- Tá»± Ä‘á»™ng loáº¡i bá» quyá»n cá»§a káº» táº¥n cÃ´ng
- Cáº£nh bÃ¡o real-time Ä‘áº¿n chá»§ server
- NgÆ°á»¡ng phÃ¡t hiá»‡n cÃ³ thá»ƒ Ä‘iá»u chá»‰nh

#### Chá»‘ng Raid (Anti-Raid)
- PhÃ¡t hiá»‡n máº«u tham gia Ä‘Ã¡ng ngá»
- GiÃ¡m sÃ¡t tuá»•i tÃ i khoáº£n vÃ  táº§n suáº¥t tham gia
- Tá»± Ä‘á»™ng kick nhá»¯ng káº» raid tiá»m nÄƒng
- Cá»­a sá»• vÃ  ngÆ°á»¡ng phÃ¡t hiá»‡n cÃ³ thá»ƒ Ä‘iá»u chá»‰nh
- Há»‡ thá»‘ng whitelist cho ngÆ°á»i dÃ¹ng tin cáº­y

#### Chá»‘ng Spam (Anti-Spam)
- GiÃ¡m sÃ¡t táº§n suáº¥t tin nháº¯n
- PhÃ¡t hiá»‡n tin nháº¯n trÃ¹ng láº·p
- NgÄƒn cháº·n spam mention
- Cáº£nh bÃ¡o vÃ  trá»«ng pháº¡t tá»± Ä‘á»™ng
- Theo dÃµi thÃ´ng minh tá»«ng ngÆ°á»i dÃ¹ng
- Whitelist kÃªnh cho vÃ¹ng miá»…n nhiá»…m

#### Tá»± Ä‘á»™ng Kiá»ƒm duyá»‡t (Auto-Mod)
- Lá»c tá»« ngá»¯ cáº¥m
- Cháº·n link invite Discord
- PhÃ¡t hiá»‡n viáº¿t hoa quÃ¡ má»©c
- Danh sÃ¡ch Ä‘en tÃ¹y chá»‰nh theo server
- HÃ nh Ä‘á»™ng tá»± Ä‘á»™ng dá»±a trÃªn má»©c Ä‘á»™ nghiÃªm trá»ng

### âš ï¸ Há»‡ thá»‘ng Cáº£nh bÃ¡o NÃ¢ng cao
- Há»‡ thá»‘ng trá»«ng pháº¡t tÄƒng dáº§n (10 cáº¥p Ä‘á»™)
- Tá»± Ä‘á»™ng xá»­ lÃ½ dá»±a trÃªn sá»‘ láº§n cáº£nh bÃ¡o:
  - Cáº¥p 1-3: Chá»‰ cáº£nh bÃ¡o
  - Cáº¥p 4: Mute 5 phÃºt
  - Cáº¥p 5: Mute 30 phÃºt
  - Cáº¥p 6: Mute 1 giá»
  - Cáº¥p 7: Mute 3 giá»
  - Cáº¥p 8: Kick khá»i server
  - Cáº¥p 9-10: Ban vÄ©nh viá»…n
- LÆ°u lá»‹ch sá»­ cáº£nh bÃ¡o kÃ¨m lÃ½ do
- XÃ³a cáº£nh bÃ¡o Ä‘á»ƒ cho cÆ¡ há»™i sá»­a Ä‘á»•i
- ThÃ´ng bÃ¡o DM cho ngÆ°á»i dÃ¹ng

### ğŸ”¨ CÃ´ng cá»¥ Kiá»ƒm duyá»‡t
- **Timeout/Mute**: Cáº¥m chat táº¡m thá»i vá»›i thá»i gian tÃ¹y chá»‰nh (há»— trá»£ Ä‘á»‹nh dáº¡ng 1h, 30m, 1h30m)
- **Kick**: Äuá»•i thÃ nh viÃªn gÃ¢y rá»‘i khá»i server
- **Ban/Unban**: Cáº¥m vÄ©nh viá»…n vá»›i kháº£ nÄƒng gá»¡ ban
- **XÃ³a tin nháº¯n**: XÃ³a hÃ ng loáº¡t tin nháº¯n (1-100)
- **KhÃ³a/Má»Ÿ khÃ³a kÃªnh**: Kiá»ƒm soÃ¡t kÃªnh kháº©n cáº¥p
- **Slowmode**: Giá»›i háº¡n tá»‘c Ä‘á»™ gá»­i tin
- **Lá»‡nh Say**: Bot nÃ³i thay vá»›i tÃ­nh nÄƒng reply tin nháº¯n

### ğŸ“Š Lá»‡nh ThÃ´ng tin
- Thá»‘ng kÃª server toÃ n diá»‡n
- Há»“ sÆ¡ ngÆ°á»i dÃ¹ng chi tiáº¿t kÃ¨m tráº¡ng thÃ¡i cáº£nh bÃ¡o
- Kiá»ƒm tra Ä‘á»™ trá»… real-time
- Prefix tÃ¹y chá»‰nh theo server
- TÃ­ch há»£p kÃªnh mod-log vÃ  security-log

### ğŸŒ Há»— trá»£ Äa ngÃ´n ngá»¯
- Há»— trá»£ Ä‘áº§y Ä‘á»§ tiáº¿ng Anh vÃ  tiáº¿ng Viá»‡t
- TÃ¹y chá»n ngÃ´n ngá»¯ theo tá»«ng server
- Slash command `/setlanguage` Ä‘á»ƒ dá»… dÃ ng chuyá»ƒn Ä‘á»•i
- Chá»‰ admin má»›i Ä‘Æ°á»£c Ä‘á»•i ngÃ´n ngá»¯
- Táº¥t cáº£ lá»‡nh, tin nháº¯n vÃ  embed Ä‘á»u thÃ­ch á»©ng theo ngÃ´n ngá»¯ Ä‘Ã£ chá»n

## ğŸš€ Báº¯t Ä‘áº§u nhanh

### YÃªu cáº§u
- Python 3.12.x (Ä‘Ã£ test trÃªn 3.12.10)
- Discord Bot Token
- Quyá»n Administrator trong server
- (TÃ¹y chá»n) NVIDIA API Key cho tÃ­nh nÄƒng AI

### CÃ i Ä‘áº·t

1. Táº£i vá» cÃ¡c file bot
2. CÃ i Ä‘áº·t thÆ° viá»‡n:
```bash
pip install -r requirements.txt
```

3. Táº¡o file `.env` vá»›i cáº¥u hÃ¬nh:
```env
DISCORD_BOT_TOKEN=token_bot_cá»§a_báº¡n
OWNER_ID=discord_id_cá»§a_báº¡n
NVIDIA_API_KEY=nvidia_api_key  # TÃ¹y chá»n
```

4. Cháº¡y bot:
```bash
python main.py
```

### Cáº¥u trÃºc File
```
dorothy/
â”œâ”€â”€ main.py              # File khá»Ÿi Ä‘á»™ng chÃ­nh
â”œâ”€â”€ config.py            # Cáº¥u hÃ¬nh vÃ  háº±ng sá»‘
â”œâ”€â”€ database.py          # Quáº£n lÃ½ dá»¯ liá»‡u vÃ  lÆ°u trá»¯
â”œâ”€â”€ localization.py      # Há»‡ thá»‘ng há»— trá»£ Ä‘a ngÃ´n ngá»¯
â”œâ”€â”€ security.py          # TÃ­nh nÄƒng báº£o máº­t (anti-nuke, anti-raid, v.v.)
â”œâ”€â”€ moderation.py        # Lá»‡nh kiá»ƒm duyá»‡t
â”œâ”€â”€ info_commands.py     # Lá»‡nh thÃ´ng tin vÃ  tiá»‡n Ã­ch
â”œâ”€â”€ security_commands.py # Lá»‡nh quáº£n lÃ½ báº£o máº­t
â”œâ”€â”€ doro_ai.py          # PhÃ¢n tÃ­ch cáº£m xÃºc AI
â”œâ”€â”€ events.py           # Xá»­ lÃ½ sá»± kiá»‡n Discord
â””â”€â”€ utils.py            # HÃ m trá»£ giÃºp
```

## ğŸ“ Danh sÃ¡ch Lá»‡nh

### ğŸ¤– Lá»‡nh AI
- `@Dorothy [tin nháº¯n]` - Chat vá»›i Dorothy AI (pháº£n há»“i "doro doro!")

### ğŸ›¡ï¸ Lá»‡nh Báº£o máº­t
- `-security` - Xem tráº¡ng thÃ¡i báº£o máº­t vÃ  nháº­t kÃ½ gáº§n Ä‘Ã¢y
- `-antinuke [on/off]` - Báº­t/táº¯t chá»‘ng phÃ¡ server
- `-antiraid [on/off]` - Báº­t/táº¯t chá»‘ng raid
- `-antispam [on/off]` - Báº­t/táº¯t chá»‘ng spam
- `-automod [on/off]` - Báº­t/táº¯t tá»± Ä‘á»™ng kiá»ƒm duyá»‡t
- `-whitelist @user [add/remove]` - Quáº£n lÃ½ whitelist ngÆ°á»i dÃ¹ng
- `-whitelistchannel [#channel] [add/remove]` - Quáº£n lÃ½ whitelist kÃªnh (vÃ¹ng miá»…n nhiá»…m)
- `-blacklist [add/remove] <tá»«>` - Quáº£n lÃ½ danh sÃ¡ch tá»« cáº¥m

### âš ï¸ Há»‡ thá»‘ng Cáº£nh bÃ¡o
- `-warn @user [lÃ½ do]` - Cáº£nh bÃ¡o thÃ nh viÃªn
- `-warnings [@user]` - Kiá»ƒm tra sá»‘ cáº£nh bÃ¡o
- `-clearwarns @user` - XÃ³a toÃ n bá»™ cáº£nh bÃ¡o

### ğŸ”‡ Lá»‡nh Timeout
- `-timeout @user [time] [lÃ½ do]` - Cáº¥m chat (vd: 5m, 1h, 2h30m)
- `-to @user [time]` - Viáº¿t táº¯t
- `-untimeout @user` - Gá»¡ timeout
- `-rto @user` - Viáº¿t táº¯t gá»¡ timeout

### ğŸ”¨ Lá»‡nh Kick/Ban
- `-kick @user [lÃ½ do]` - Äuá»•i thÃ nh viÃªn
- `-ban @user [lÃ½ do]` - Cáº¥m thÃ nh viÃªn
- `-unban <user_id> [lÃ½ do]` - Gá»¡ ban
- `-rban <user_id>` - Viáº¿t táº¯t gá»¡ ban

### ğŸ› ï¸ Lá»‡nh Tiá»‡n Ã­ch
- `-clear [sá»‘]` - XÃ³a tin nháº¯n (1-100)
- `-lock [#kÃªnh]` - KhÃ³a kÃªnh
- `-unlock [#kÃªnh]` - Má»Ÿ khÃ³a kÃªnh
- `-slowmode [giÃ¢y]` - Äáº·t slowmode (0-21600)
- `-say <ná»™i dung>` - Bot nÃ³i thay
- `-say -r <msg_id> <ná»™i dung>` - Bot reply tin nháº¯n

### ğŸ“Š ThÃ´ng tin
- `-help` - Hiá»ƒn thá»‹ táº¥t cáº£ lá»‡nh
- `-serverinfo` - Chi tiáº¿t server
- `-userinfo [@user]` - ThÃ´ng tin user kÃ¨m cáº£nh bÃ¡o
- `-ping` - Kiá»ƒm tra Ä‘á»™ trá»…
- `-setprefix <prefix>` - Äáº·t prefix tÃ¹y chá»‰nh cho server

### ğŸŒ NgÃ´n ngá»¯ (Slash Commands)
- `/setlanguage` - Äá»•i ngÃ´n ngá»¯ bot (Chá»‰ Admin)
  - ğŸ‡¬ğŸ‡§ English
  - ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t

## âš™ï¸ Cáº¥u hÃ¬nh

### Biáº¿n mÃ´i trÆ°á»ng
Táº¡o file `.env` trong thÆ° má»¥c gá»‘c:
```env
DISCORD_BOT_TOKEN=token_cá»§a_báº¡n
OWNER_ID=discord_id_cá»§a_báº¡n
BOT_OWNER_IDS=id1,id2,id3  # Nhiá»u owner (tÃ¹y chá»n)
NVIDIA_API_KEY=nvidia_key  # TÃ¹y chá»n cho AI
```

### CÃ i Ä‘áº·t Báº£o máº­t
Táº¥t cáº£ tÃ­nh nÄƒng báº£o máº­t Ä‘Æ°á»£c báº­t máº·c Ä‘á»‹nh vÃ  cÃ³ thá»ƒ báº­t/táº¯t theo server:
- Anti-Nuke: NgÄƒn cháº·n ban/kick/xÃ³a hÃ ng loáº¡t
- Anti-Raid: Cháº·n máº«u tham gia Ä‘Ã¡ng ngá»
- Anti-Spam: GiÃ¡m sÃ¡t táº§n suáº¥t vÃ  trÃ¹ng láº·p tin nháº¯n
- Auto-Mod: Lá»c tá»« cáº¥m vÃ  link

### TÃ¹y chá»‰nh NgÆ°á»¡ng Báº£o máº­t
Sá»­a `config.py` Ä‘á»ƒ Ä‘iá»u chá»‰nh ngÆ°á»¡ng phÃ¡t hiá»‡n:
```python
RAID_DETECTION_THRESHOLD = 5  # Sá»‘ láº§n join trong cá»­a sá»• thá»i gian
SPAM_MESSAGE_THRESHOLD = 10   # Tin nháº¯n trong cá»­a sá»• thá»i gian
NUKE_BAN_THRESHOLD = 3        # Sá»‘ ban Ä‘Æ°á»£c phÃ¡t hiá»‡n
```

### TÃ¹y chá»‰nh Cáº¥p Ä‘á»™ Cáº£nh bÃ¡o
Sá»­a `WARNING_LEVELS` trong `config.py`:
```python
WARNING_LEVELS = {
    1: {"action": "none", "duration": 0, "message": "Tin nháº¯n cáº£nh bÃ¡o"},
    # ... tá»•ng 10 cáº¥p Ä‘á»™
}
```

### KÃªnh Log
Táº¡o cÃ¡c kÃªnh nÃ y Ä‘á»ƒ tá»± Ä‘á»™ng ghi log:
- `mod-log` - HÃ nh Ä‘á»™ng kiá»ƒm duyá»‡t (warn, kick, ban)
- `security-log` - Sá»± kiá»‡n báº£o máº­t (raid, spam, nuke)

## ğŸ”’ Quyá»n YÃªu cáº§u

Bot cáº§n cÃ¡c quyá»n Discord sau:
- Quáº£n lÃ½ Tin nháº¯n
- Quáº£n lÃ½ Vai trÃ²
- Kick ThÃ nh viÃªn
- Ban ThÃ nh viÃªn
- Timeout ThÃ nh viÃªn
- Xem KÃªnh
- Gá»­i Tin nháº¯n
- NhÃºng Link

## ğŸ¯ Thá»±c hÃ nh Tá»‘t nháº¥t

1. **Thiáº¿t láº­p kÃªnh log** - Táº¡o kÃªnh `mod-log` vÃ  `security-log`
2. **Cáº¥u hÃ¬nh thá»© tá»± role** - Role bot pháº£i cao hÆ¡n táº¥t cáº£ role Ä‘Æ°á»£c quáº£n lÃ½
3. **Whitelist staff tin cáº­y** - ThÃªm mod vÃ o whitelist Ä‘á»ƒ trÃ¡nh false positive
4. **Test tÃ­nh nÄƒng báº£o máº­t** - Test trong server riÃªng trÆ°á»›c khi dÃ¹ng thá»±c táº¿
5. **Xem log báº£o máº­t** - ThÆ°á»ng xuyÃªn kiá»ƒm tra lá»‡nh `-security` Ä‘á»ƒ xem cáº£nh bÃ¡o
6. **Cáº¥u hÃ¬nh ngÆ°á»¡ng** - Äiá»u chá»‰nh ngÆ°á»¡ng phÃ¡t hiá»‡n dá»±a trÃªn kÃ­ch thÆ°á»›c server
7. **ÄÃ o táº¡o staff** - Äáº£m báº£o mod hiá»ƒu táº¥t cáº£ há»‡ thá»‘ng báº£o máº­t
8. **Báº£o trÃ¬ thÆ°á»ng xuyÃªn** - XÃ³a cáº£nh bÃ¡o cÅ© vÃ  xem láº¡i blacklist Ä‘á»‹nh ká»³

## ğŸ› Xá»­ lÃ½ Sá»± cá»‘

### Bot khÃ´ng pháº£n há»“i lá»‡nh
- Kiá»ƒm tra bot cÃ³ message content intent
- XÃ¡c nháº­n prefix lá»‡nh Ä‘Ãºng (`-`)
- Äáº£m báº£o bot cÃ³ Ä‘á»§ quyá»n

### KhÃ´ng thá»ƒ timeout/kick/ban
- Role bot pháº£i cao hÆ¡n role cao nháº¥t cá»§a thÃ nh viÃªn
- Bot khÃ´ng thá»ƒ quáº£n lÃ½ chá»§ server hoáº·c admin

### Lá»‡nh bÃ¡o lá»—i quyá»n
- NgÆ°á»i dÃ¹ng cáº§n quyá»n Quáº£n lÃ½ Tin nháº¯n hoáº·c lÃ  owner bot
- Má»™t sá»‘ lá»‡nh chá»‰ owner dÃ¹ng Ä‘Æ°á»£c

## ğŸ“š Há»— trá»£

Khi gáº·p váº¥n Ä‘á»:
1. Kiá»ƒm tra cÃº phÃ¡p lá»‡nh vá»›i `-help`
2. XÃ¡c nháº­n quyá»n bot trong cÃ i Ä‘áº·t server
3. Xem lá»—i trong console
4. Kiá»ƒm tra tráº¡ng thÃ¡i Discord API

## ğŸ¨ TÃ¹y biáº¿n

Bot Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ dá»… tÃ¹y chá»‰nh:
- Sá»­a mÃ u embed trong pháº£n há»“i lá»‡nh
- Äá»•i prefix lá»‡nh khi khá»Ÿi táº¡o bot
- ThÃªm lá»‡nh tÃ¹y chá»‰nh theo máº«u cÃ³ sáºµn
- Äiá»u chá»‰nh thá»i gian timeout vÃ  tin nháº¯n cáº£nh bÃ¡o

## ğŸ”§ TÃ­nh nÄƒng NÃ¢ng cao

### Kiáº¿n trÃºc Modular
Dorothy sá»­ dá»¥ng thiáº¿t káº¿ modular Ä‘á»ƒ dá»… báº£o trÃ¬ vÃ  tÃ¹y chá»‰nh:
- **config.py** - Táº¥t cáº£ háº±ng sá»‘ cáº¥u hÃ¬nh
- **database.py** - LÆ°u trá»¯ dá»¯ liá»‡u dá»±a trÃªn JSON
- **security.py** - Thuáº­t toÃ¡n báº£o máº­t cá»‘t lÃµi
- **moderation.py** - Logic lá»‡nh kiá»ƒm duyá»‡t
- **doro_ai.py** - PhÃ¢n tÃ­ch cáº£m xÃºc AI
- **events.py** - GiÃ¡m sÃ¡t sá»± kiá»‡n Discord

### Ghi Log Báº£o máº­t
Táº¥t cáº£ sá»± kiá»‡n báº£o máº­t Ä‘Æ°á»£c ghi vá»›i timestamp vÃ  chi tiáº¿t:
- PhÃ¡t hiá»‡n raid kÃ¨m tuá»•i tÃ i khoáº£n
- Máº«u spam vÃ  theo dÃµi ngÆ°á»i dÃ¹ng
- Ná»— lá»±c nuke vá»›i sá»‘ lÆ°á»£ng hÃ nh Ä‘á»™ng
- KÃ­ch hoáº¡t auto-mod vá»›i má»©c Ä‘á»™ nghiÃªm trá»ng

### LÆ°u trá»¯ Dá»¯ liá»‡u
Táº¥t cáº£ dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trong `dorothy_data.json`:
- Lá»‹ch sá»­ cáº£nh bÃ¡o theo ngÆ°á»i dÃ¹ng
- CÃ i Ä‘áº·t báº£o máº­t theo server
- Prefix tÃ¹y chá»‰nh
- NgÆ°á»i dÃ¹ng trong whitelist
- Tá»« trong blacklist
- Log sá»± kiá»‡n báº£o máº­t

---

> **Ghi chÃº:** Dorothy Ä‘Æ°á»£c xÃ¢y dá»±ng vá»›i kiáº¿n trÃºc modular Ä‘á»ƒ dá»… dÃ ng tÃ¹y chá»‰nh. Náº¿u báº¡n cáº§n giÃºp Ä‘á»¡ chá»‰nh sá»­a tÃ­nh nÄƒng, trá»£ lÃ½ AI cÃ³ thá»ƒ giÃºp báº¡n Ä‘iá»u hÆ°á»›ng codebase má»™t cÃ¡ch hiá»‡u quáº£!

## ğŸ“„ Giáº¥y phÃ©p

Bot Ä‘Æ°á»£c cung cáº¥p Ä‘á»ƒ sá»­ dá»¥ng cÃ¡ nhÃ¢n vÃ  thÆ°Æ¡ng máº¡i. Thoáº£i mÃ¡i chá»‰nh sá»­a vÃ  phÃ¢n phá»‘i.

---
*Dorothy - Bot Báº£o máº­t & Kiá»ƒm duyá»‡t Discord NÃ¢ng cao v3.1*
